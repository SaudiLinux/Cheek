# دليل استغلال ثغرات خدمات السحابة
# Cloud Services Vulnerability Exploitation Guide

## 📋 نظرة عامة
أدوات استغلال ثغرات خدمات السحابة في Cheek مصممة للكشف عن الثغرات الأمنية في البيئات السحابية مثل AWS، Azure، وGoogle Cloud Platform.

## 🛠️ الأدوات المتوفرة

### 1. Cloud Exploits Tool (`exploits/cloud_exploits.py`)
أداة متخصصة في استغلال ثغرات الخدمات السحابية:
- استغلال خدمة البيانات الوصفية (Metadata Service)
- هجمات SSRF للوصول إلى خدمات السحابة الداخلية
- استغلال ثغرات التخزين السحابي
- استغلال ثغرات واجهات برمجة التطبيقات السحابية
- استغلال ثغرات الحاويات والأوركستراشن

### 2. Cloud Vulnerability Scanner (`cloud_vulnerability_scanner.py`)
فاحص شامل لثغرات الخدمات السحابية:
- الكشف المتقدم عن مزود الخدمة السحابية
- فحص شامل لجميع أنواع الثغرات السحابية
- تقارير مفصلة مع التوصيات الأمنية

## 🎯 أنواع الثغرات التي يمكن استغلالها

### 1. ثغرات خدمة البيانات الوصفية (Metadata Service Vulnerabilities)
**الخطورة: CRITICAL**

#### وصف الثغرة:
خدمة البيانات الوصفية توفر معلومات حساسة عن مثيلات الخدمات السحابية مثل:
- مفاتيح الوصول (Access Keys)
- معلومات الهوية (Instance Identity)
- بيانات الاعتماد (Security Credentials)
- معلومات الشبكة (Network Configuration)

#### طرق الاستغلال:
```bash
# استغلال مباشر (إذا كان متاحاً)
curl http://169.254.169.254/latest/meta-data/iam/security-credentials/

# استغلال عبر SSRF
python exploits/cloud_exploits.py target.com --threads 10
```

#### مؤشرات الاستغلال الناجح:
- استجابة تحتوي على "ami-" أو "instance-id"
- بيانات اعتماد AWS
- معلومات حساسة عن المثيل

### 2. ثغرات التخزين السحابي (Cloud Storage Vulnerabilities)
**الخطورة: HIGH**

#### وصف الثغرة:
- حاويات تخزين عامة (Public Buckets)
- ثغرات الوصول إلى الملفات
- عدم وجود تشفير مناسب

#### طرق الاستغلال:
```bash
# فحص التخزين السحابي
python cloud_vulnerability_scanner.py target.com --threads 5
```

### 3. ثغرات واجهات برمجة التطبيقات السحابية (Cloud API Vulnerabilities)
**الخطورة: HIGH**

#### وصف الثغرة:
- واجهات API بدون مصادقة
- صلاحيات مفرطة (Excessive Permissions)
- سوء تكوين CORS

#### طرق الاستغلال:
- اختبار الوصول غير المصادق إلى نقاط النهاية
- اختبار طرق HTTP المختلفة
- اختبار تجاوز المصادقة

### 4. ثغرات الحاويات والأوركستراشن (Container Vulnerabilities)
**الخطورة: CRITICAL**

#### وصف الثغرة:
- Kubernetes API غير محمي
- Docker API معرض
- RBAC غير مفعل

#### مؤشرات الاستغلال:
- استجابة تحتوي على "kubernetes" أو "kube-"
- وصول إلى /api/v1/pods أو /api/v1/nodes
- معلومات عن الحاويات والبودات

## 🔧 أمثلة على الاستخدام

### مثال 1: فحص شامل لثغرات السحابة
```bash
# فحص شامل
python cloud_vulnerability_scanner.py example.com --threads 10 --timeout 15

# فحص مع تفاصيل إضافية
python cloud_vulnerability_scanner.py example.com --threads 5 --timeout 20
```

### مثال 2: استغلال ثغرات محددة
```bash
# استغلال ثغرات الخدمة السحابية فقط
python exploits/cloud_exploits.py example.com --threads 10

# استغلال متقدم
python exploits/cloud_exploits.py example.com --threads 15
```

### مثال 3: التكامل مع Cheek الرئيسي
```bash
# استخدام Cheek مع الفحص السحابي
python cheek.py example.com --threads 10 --timeout 15

# ثم استخدام أدوات السحابة للتفاصيل
python cloud_vulnerability_scanner.py example.com
```

## 📊 فهم النتائج

### مستويات الخطورة:

#### 🔴 CRITICAL (حرج)
- وصول إلى خدمة البيانات الوصفية
- تسرب بيانات الاعتماد
- وصول غير مصرح به إلى البنية التحتية

#### 🟡 HIGH (عالي)
- تكوينات API غير آمنة
- تخزين عام بدون حماية
- ثغرات في المصادقة

#### 🟢 MEDIUM (متوسط)
- معلومات التسرب
- طرق HTTP المفرطة
- سوء تكوين CORS

## 🛡️ التوصيات الأمنية

### لحماية خدمة البيانات الوصفية:
1. حجب الوصول إلى 169.254.169.254 من المصادر الخارجية
2. استخدام IMDSv2 في AWS
3. تنفيذ حماية SSRF
4. تقييد الوصول عبر مجموعات أمان الشبكة

### لحماية التخزين السحابي:
1. استخدام سياسات وصول صارمة
2. تمكين التشفير في الراحة والنقل
3. مراجعة صلاحيات الحاويات بانتظام
4. استخدام مفاتيح موقعة للوصول المؤقت

### لحماية واجهات API:
1. تنفيذ المصادقة والترخيص المناسبين
2. استخدام حدود معدل الطلب (Rate Limiting)
3. التحقق من المدخلات بشكل صارم
4. استخدام بوابات API مع ميزات الأمان

### لحماية الحاويات:
1. تأمين Kubernetes API باستخدام RBAC
2. تعطيل الوصول العام إلى واجهات Docker
3. استخدام سياسات الشبكة (Network Policies)
4. مراقبة سجلات الأمان بانتظام

## ⚠️ التنبيهات المهمة

1. **الاستخدام الأخلاقي**: هذه الأدوات مخصصة للاختبار الأمني فقط
2. **الإذن**: يجب الحصول على إذن صريح قبل اختبار أي نظام
3. **السرية**: لا تشارك النتائج مع جهات غير مصرح لها
4. **الامتثال**: تأكد من الامتثال للوائح والقوانين المحلية

## 🔍 التحقق من النتائج

### للتحقق من ثغرات البيانات الوصفية:
```bash
# اختبار يدوي
curl -I http://169.254.169.254/latest/meta-data/

# اختبار عبر SSRF
# استخدم أداة SSRF المتوفرة في exploits/
```

### للتحقق من ثغرات التخزين:
```bash
# اختبار الوصول إلى الحاويات
curl https://target.com/s3-bucket/
curl https://target.com/storage/
```

### للتحقق من ثغرات API:
```bash
# اختبار طرق HTTP
curl -X OPTIONS https://target.com/api/
curl -H "Origin: https://evil.com" https://target.com/api/
```

## 📞 الدعم والمساعدة

للحصول على مزيد من المعلومات:
1. تحقق من ملفات README الأخرى
2. راجع تقارير JSON الناتجة
3. استخدم الخيار --help مع الأدوات

---

**ملاحظة**: هذه الأدوات قوية ويجب استخدامها بمسؤولية. تأكد دائماً من أن لديك الإذن المناسب قبل اختبار أي نظام.